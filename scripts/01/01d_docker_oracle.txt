# Oracle container download und erster Test, indem wir uns die User anzeigen lassen
# man kann podman oder docker verwenden, um die Container zu betreiben
# see https://container-registry.oracle.com/ords/f?p=113:4:106648115637034:::4:P4_REPOSITORY,AI_REPOSITORY,AI_REPOSITORY_NAME,P4_REPOSITORY_NAME,P4_EULA_ID,P4_BUSINESS_AREA_ID:1863,1863,Oracle%20Database%20Free,Oracle%20Database%20Free,1,0&cs=3vh3v7Bx-M1AhcZcni5BZw08qK4bc49cPe_X8TG5ZkK6Z8YJb6F_7s-kOEqsi9ahcAJrOaMTAC5QDMo1FbyMgWA

sudo -s
docker pull container-registry.oracle.com/database/free:latest
export DOCKER_CONTAINERNAME=Oracle23Free
docker run -d --name $DOCKER_CONTAINERNAME container-registry.oracle.com/database/free:latest
docker exec $DOCKER_CONTAINERNAME ./setPassword.sh FhIms2024
# verbinde mit der Datenbank mit sqlplus innerhalb des Containers und zeige an, welche pdbs und welche user es gibt
# über --tty=false kann man eine Kommandosequenz als Here-Document übergeben
docker exec -i --tty=false $DOCKER_CONTAINERNAME sqlplus -s / as sysdba <<!
   show pdbs;
   set lines 300 pages 0;
   select UserName, user_id from all_users order by 2 asc;
!

### optional kann man instantclient installieren und damit sqlplus von ausserhalb verwenden, ist aber nicht nötig...
#cd /usr/local
#mkdir instantclient
#cd instantclient
#wget https://download.oracle.com/otn_software/linux/instantclient/23c/instantclient-basic-linux.x64-23.3.0.0.0.zip
#wget https://download.oracle.com/otn_software/linux/instantclient/23c/instantclient-sqlplus-linux.x64-23.3.0.0.0.zip
#unzip instantclient-sqlplus-linux.x64-23.3.0.0.0.zip
#export PATH=$PATH:/usr/local/instantclient/instantclient_23_3
#export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/local/instantclient/instantclient_23_3
#
#sqlplus sys@localhost:1521/FREEPDB1 as sysdba